<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ– Ù„Ø­ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ v4.0 - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</title>
  <style>
    /* Design System */
    :root {
      --color-white: rgba(255, 255, 255, 1);
      --color-black: rgba(0, 0, 0, 1);
      --color-cream-50: rgba(252, 252, 249, 1);
      --color-cream-100: rgba(255, 255, 253, 1);
      --color-gray-200: rgba(245, 245, 245, 1);
      --color-gray-300: rgba(167, 169, 169, 1);
      --color-gray-400: rgba(119, 124, 124, 1);
      --color-slate-500: rgba(98, 108, 113, 1);
      --color-brown-600: rgba(94, 82, 64, 1);
      --color-charcoal-700: rgba(31, 33, 33, 1);
      --color-charcoal-800: rgba(38, 40, 40, 1);
      --color-slate-900: rgba(19, 52, 59, 1);
      --color-teal-300: rgba(50, 184, 198, 1);
      --color-teal-400: rgba(45, 166, 178, 1);
      --color-teal-500: rgba(33, 128, 141, 1);
      --color-teal-600: rgba(29, 116, 128, 1);
      --color-teal-700: rgba(26, 104, 115, 1);
      --color-red-400: rgba(255, 84, 89, 1);
      --color-red-500: rgba(192, 21, 47, 1);
      --color-orange-400: rgba(230, 129, 97, 1);
      --color-orange-500: rgba(168, 75, 47, 1);

      --color-brown-600-rgb: 94, 82, 64;
      --color-teal-500-rgb: 33, 128, 141;
      --color-slate-900-rgb: 19, 52, 59;
      --color-slate-500-rgb: 98, 108, 113;
      --color-red-500-rgb: 192, 21, 47;
      --color-success-rgb: 4, 120, 87;

      --color-bg-1: rgba(59, 130, 246, 0.08);
      --color-bg-2: rgba(245, 158, 11, 0.08);
      --color-bg-3: rgba(34, 197, 94, 0.08);
      --color-bg-4: rgba(239, 68, 68, 0.08);

      --color-background: var(--color-cream-50);
      --color-surface: var(--color-cream-100);
      --color-text: var(--color-slate-900);
      --color-text-secondary: var(--color-slate-500);
      --color-primary: var(--color-teal-500);
      --color-primary-hover: var(--color-teal-600);
      --color-primary-active: var(--color-teal-700);
      --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
      --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
      --color-border: rgba(var(--color-brown-600-rgb), 0.2);
      --color-btn-primary-text: var(--color-cream-50);
      --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
      --color-error: var(--color-red-500);
      --color-success: rgba(4, 120, 87, 1);

      --font-family-base: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      --font-size-sm: 12px;
      --font-size-base: 14px;
      --font-size-lg: 16px;
      --font-size-xl: 18px;
      --font-size-2xl: 20px;
      --font-size-3xl: 24px;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 600;
      --font-weight-bold: 700;

      --space-4: 4px;
      --space-8: 8px;
      --space-12: 12px;
      --space-16: 16px;
      --space-20: 20px;
      --space-24: 24px;
      --space-32: 32px;

      --radius-sm: 6px;
      --radius-base: 8px;
      --radius-lg: 12px;
      --radius-full: 9999px;

      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.04);
      --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.04);
    }

    [data-color-scheme="dark"] {
      --color-gray-400-rgb: 119, 124, 124;
      --color-teal-300-rgb: 50, 184, 198;
      --color-gray-300-rgb: 167, 169, 169;
      --color-gray-200-rgb: 245, 245, 245;
      --color-success-rgb: 50, 184, 198;

      --color-bg-1: rgba(29, 78, 216, 0.15);
      --color-bg-2: rgba(180, 83, 9, 0.15);
      --color-bg-3: rgba(21, 128, 61, 0.15);
      --color-bg-4: rgba(185, 28, 28, 0.15);

      --color-background: var(--color-charcoal-700);
      --color-surface: var(--color-charcoal-800);
      --color-text: var(--color-gray-200);
      --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
      --color-primary: var(--color-teal-300);
      --color-primary-hover: var(--color-teal-400);
      --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
      --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
      --color-border: rgba(var(--color-gray-400-rgb), 0.3);
      --color-btn-primary-text: var(--color-slate-900);
      --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
      --color-error: var(--color-red-400);
      --color-success: var(--color-teal-300);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family-base);
      background: var(--color-background);
      color: var(--color-text);
      line-height: 1.6;
      direction: rtl;
    }

    /* Navbar */
    .navbar {
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      padding: var(--space-16) var(--space-24);
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow-sm);
    }

    .navbar-brand {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-text);
    }

    .navbar-nav {
      display: flex;
      gap: var(--space-8);
      align-items: center;
    }

    .nav-btn {
      padding: var(--space-8) var(--space-16);
      background: transparent;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      color: var(--color-text);
      cursor: pointer;
      font-size: var(--font-size-base);
      transition: all 0.2s;
    }

    .nav-btn:hover {
      background: var(--color-secondary);
    }

    .nav-btn.active {
      background: var(--color-primary);
      color: var(--color-btn-primary-text);
      border-color: var(--color-primary);
    }

    /* Container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: var(--space-24);
    }

    /* View */
    .view {
      display: none;
    }

    .view.active {
      display: block;
    }

    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--space-16);
      margin-bottom: var(--space-24);
    }

    .stat-card {
      background: var(--color-surface);
      padding: var(--space-20);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      box-shadow: var(--shadow-sm);
    }

    .stat-card h3 {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      margin-bottom: var(--space-8);
      font-weight: var(--font-weight-medium);
    }

    .stat-card .value {
      font-size: var(--font-size-3xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-text);
    }

    /* Toolbar */
    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-24);
      gap: var(--space-16);
      flex-wrap: wrap;
    }

    .search-filter {
      display: flex;
      gap: var(--space-8);
      flex: 1;
      min-width: 250px;
    }

    .search-input {
      flex: 1;
      padding: var(--space-8) var(--space-12);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      background: var(--color-surface);
      color: var(--color-text);
      font-size: var(--font-size-base);
    }

    .btn {
      padding: var(--space-8) var(--space-16);
      border-radius: var(--radius-base);
      border: none;
      cursor: pointer;
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: var(--space-8);
    }

    .btn-primary {
      background: var(--color-primary);
      color: var(--color-btn-primary-text);
    }

    .btn-primary:hover {
      background: var(--color-primary-hover);
    }

    .btn-secondary {
      background: var(--color-secondary);
      color: var(--color-text);
      border: 1px solid var(--color-border);
    }

    .btn-secondary:hover {
      background: var(--color-secondary-hover);
    }

    /* Table */
    .table-container {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: var(--color-secondary);
    }

    th {
      padding: var(--space-12) var(--space-16);
      text-align: right;
      font-weight: var(--font-weight-semibold);
      font-size: var(--font-size-sm);
      color: var(--color-text);
      border-bottom: 1px solid var(--color-border);
    }

    td {
      padding: var(--space-12) var(--space-16);
      border-bottom: 1px solid var(--color-border);
      font-size: var(--font-size-base);
    }

    tbody tr:hover {
      background: var(--color-secondary);
    }

    /* Status Badge */
    .status-badge {
      display: inline-block;
      padding: var(--space-4) var(--space-12);
      border-radius: var(--radius-full);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
    }

    .status-Ù…Ø¹Ù„Ù‚ {
      background: var(--color-bg-2);
      color: var(--color-orange-500);
    }

    .status-Ù‚ÙŠØ¯-Ø§Ù„ØªØ­Ø¶ÙŠØ± {
      background: var(--color-bg-1);
      color: var(--color-teal-500);
    }

    .status-ØªÙ…-Ø§Ù„ØªÙˆØµÙŠÙ„ {
      background: var(--color-bg-3);
      color: var(--color-success);
    }

    .status-Ù…Ù„ØºÙ‰ {
      background: var(--color-bg-4);
      color: var(--color-error);
    }

    /* Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
    }

    .modal-header {
      padding: var(--space-20);
      border-bottom: 1px solid var(--color-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h2 {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-bold);
    }

    .modal-close {
      background: none;
      border: none;
      font-size: var(--font-size-2xl);
      cursor: pointer;
      color: var(--color-text-secondary);
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-base);
    }

    .modal-close:hover {
      background: var(--color-secondary);
    }

    .modal-body {
      padding: var(--space-24);
    }

    .form-group {
      margin-bottom: var(--space-16);
    }

    .form-label {
      display: block;
      margin-bottom: var(--space-8);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
      color: var(--color-text);
    }

    .form-label.required::after {
      content: '*';
      color: var(--color-error);
      margin-right: var(--space-4);
    }

    .form-control {
      width: 100%;
      padding: var(--space-8) var(--space-12);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      background: var(--color-background);
      color: var(--color-text);
      font-size: var(--font-size-base);
      font-family: var(--font-family-base);
    }

    .form-control:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(var(--color-teal-500-rgb), 0.1);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-16);
    }

    .modal-footer {
      padding: var(--space-20);
      border-top: 1px solid var(--color-border);
      display: flex;
      gap: var(--space-12);
      justify-content: flex-end;
    }

    /* Alert */
    .alert {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: var(--space-16) var(--space-24);
      border-radius: var(--radius-base);
      box-shadow: var(--shadow-lg);
      z-index: 2000;
      display: none;
      align-items: center;
      gap: var(--space-12);
      font-weight: var(--font-weight-medium);
    }

    .alert.show {
      display: flex;
    }

    .alert-success {
      background: rgba(var(--color-success-rgb), 0.9);
      color: white;
    }

    .alert-error {
      background: rgba(var(--color-red-500-rgb), 0.9);
      color: white;
    }

    /* Charts */
    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: var(--space-24);
      margin-bottom: var(--space-24);
    }

    .chart-card {
      background: var(--color-surface);
      padding: var(--space-20);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      box-shadow: var(--shadow-sm);
    }

    .chart-card h3 {
      margin-bottom: var(--space-16);
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-semibold);
    }

    .chart-container {
      height: 300px;
      position: relative;
    }

    /* Settings */
    .settings-section {
      background: var(--color-surface);
      padding: var(--space-24);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      margin-bottom: var(--space-24);
    }

    .settings-section h3 {
      margin-bottom: var(--space-16);
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-semibold);
    }

    .settings-actions {
      display: flex;
      gap: var(--space-12);
      flex-wrap: wrap;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        gap: var(--space-16);
      }

      .navbar-nav {
        width: 100%;
        flex-wrap: wrap;
      }

      .toolbar {
        flex-direction: column;
        align-items: stretch;
      }

      .search-filter {
        flex-direction: column;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .table-container {
        overflow-x: auto;
      }

      table {
        min-width: 800px;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .charts-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Alert -->
  <div id="alert" class="alert"></div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-brand">ğŸ– Ù„Ø­ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ v4.0</div>
    <div class="navbar-nav">
      <button class="nav-btn active" data-view="orders">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
      <button class="nav-btn" data-view="reports">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
      <button class="nav-btn" data-view="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
      <button class="nav-btn" id="themeToggle">ğŸŒ™</button>
    </div>
  </nav>

  <div class="container">
    <!-- Orders View -->
    <div id="orders-view" class="view active">
      <!-- Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
          <div class="value" id="totalOrders">0</div>
        </div>
        <div class="stat-card">
          <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>
          <div class="value" id="totalRevenue">0 Ø±.Ø³</div>
        </div>
        <div class="stat-card">
          <h3>Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨</h3>
          <div class="value" id="avgOrder">0 Ø±.Ø³</div>
        </div>
        <div class="stat-card">
          <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h3>
          <div class="value" id="pendingOrders">0</div>
        </div>
      </div>

      <!-- Toolbar -->
      <div class="toolbar">
        <div class="search-filter">
          <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” Ø¨Ø­Ø«...">
          <select id="filterStatus" class="form-control" style="width: 150px;">
            <option value="">ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
            <option value="Ù…Ø¹Ù„Ù‚">Ù…Ø¹Ù„Ù‚</option>
            <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±">Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±</option>
            <option value="ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option>
            <option value="Ù…Ù„ØºÙ‰">Ù…Ù„ØºÙ‰</option>
          </select>
        </div>
        <div style="display: flex; gap: var(--space-8);">
          <button class="btn btn-primary" id="newOrderBtn">â• Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</button>
          <button class="btn btn-secondary" id="exportBtn">ØªØµØ¯ÙŠØ± CSV</button>
          <button class="btn btn-secondary" id="importBtn">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
      </div>

      <!-- Table -->
      <div class="table-container">
        <table id="ordersTable">
          <thead>
            <tr>
              <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
              <th>Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†</th>
              <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
              <th>Ø§Ù„Ù…Ø§Ø´ÙŠØ©</th>
              <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
              <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
              <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
              <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="ordersTableBody">
          </tbody>
        </table>
      </div>
    </div>

    <!-- Reports View -->
    <div id="reports-view" class="view">
      <h2 style="margin-bottom: var(--space-24); font-size: var(--font-size-3xl);">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
      
      <div class="charts-grid">
        <div class="chart-card">
          <h3>ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</h3>
          <div class="chart-container">
            <canvas id="statusChart"></canvas>
          </div>
        </div>
        <div class="chart-card">
          <h3>Ø£ÙØ¶Ù„ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø§Ø´ÙŠØ§Øª</h3>
          <div class="chart-container">
            <canvas id="animalChart"></canvas>
          </div>
        </div>
      </div>

      <div class="chart-card" style="width: 100%;">
        <h3>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</h3>
        <div class="chart-container" style="height: 350px;">
          <canvas id="revenueChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Settings View -->
    <div id="settings-view" class="view">
      <h2 style="margin-bottom: var(--space-24); font-size: var(--font-size-3xl);">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
      
      <div class="settings-section">
        <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
        <div class="settings-actions">
          <button class="btn btn-primary" id="backupBtn">ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©</button>
          <button class="btn btn-secondary" id="restoreBtn">ğŸ“¥ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Ù…Ù„Ù</button>
          <button class="btn btn-secondary" id="downloadBtn">â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
          <button class="btn btn-secondary" id="clearBtn" style="background: var(--color-error); color: white;">ğŸ—‘ï¸ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
      </div>

      <div class="settings-section">
        <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª WhatsApp</h3>
        <div class="form-group">
          <label class="form-label">Ø±Ù‚Ù… WhatsApp</label>
          <input type="text" id="whatsappNumber" class="form-control" placeholder="Ù…Ø«Ø§Ù„: 966501234567">
        </div>
        <button class="btn btn-primary" id="saveWhatsappBtn">Ø­ÙØ¸</button>
      </div>

      <div class="settings-section">
        <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
        <p style="color: var(--color-text-secondary);">Ø§Ù„Ø¥ØµØ¯Ø§Ø±: 4.0</p>
        <p style="color: var(--color-text-secondary);">Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©: <span id="savedOrdersCount">0</span></p>
        <p style="color: var(--color-text-secondary);">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="lastUpdate">-</span></p>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="orderModal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h2>â• Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
        <button class="modal-close" id="closeModal">Ã—</button>
      </div>
      <div class="modal-body">
        <form id="orderForm">
          <div class="form-group">
            <label class="form-label required">Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†</label>
            <input type="text" name="customerName" class="form-control" required>
          </div>

          <div class="form-group">
            <label class="form-label required">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
            <input type="tel" name="customerPhone" class="form-control" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label required">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø´ÙŠØ©</label>
              <select name="animalType" class="form-control" required>
                <option value="">Ø§Ø®ØªØ±...</option>
                <option value="Ø¨Ù‚Ø±">Ø¨Ù‚Ø±</option>
                <option value="ØºÙ†Ù…">ØºÙ†Ù…</option>
                <option value="Ù…Ø§Ø¹Ø²">Ù…Ø§Ø¹Ø²</option>
                <option value="Ø¬Ù…Ù„">Ø¬Ù…Ù„</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label required">Ø§Ù„ÙƒÙ…ÙŠØ© (Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø¤ÙˆØ³)</label>
              <input type="number" name="quantity" class="form-control" min="1" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label required">Ø§Ù„Ø³Ø¹Ø± Ù„Ù„ÙˆØ­Ø¯Ø© (Ø±.Ø³)</label>
              <input type="number" name="unitPrice" class="form-control" min="0" step="0.01" required>
            </div>

            <div class="form-group">
              <label class="form-label">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø±.Ø³)</label>
              <input type="number" name="totalAmount" class="form-control" readonly>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label required">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©</label>
              <select name="serviceType" class="form-control" required>
                <option value="">Ø§Ø®ØªØ±...</option>
                <option value="ØªÙˆØµÙŠÙ„">ØªÙˆØµÙŠÙ„</option>
                <option value="Ø§Ø³ØªÙ„Ø§Ù…">Ø§Ø³ØªÙ„Ø§Ù…</option>
                <option value="ØªÙØªÙŠØ´">ØªÙØªÙŠØ´</option>
                <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label required">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</label>
              <select name="status" class="form-control" required>
                <option value="Ù…Ø¹Ù„Ù‚">Ù…Ø¹Ù„Ù‚</option>
                <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±">Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±</option>
                <option value="ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option>
                <option value="Ù…Ù„ØºÙ‰">Ù…Ù„ØºÙ‰</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label required">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨</label>
            <input type="date" name="date" class="form-control" required>
          </div>

          <div class="form-group">
            <label class="form-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
            <textarea name="notes" class="form-control" rows="3"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelBtn">Ø¥Ù„ØºØ§Ø¡</button>
        <button type="submit" form="orderForm" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨</button>
      </div>
    </div>
  </div>

  <!-- Hidden file input for import -->
  <input type="file" id="fileInput" accept=".json" style="display: none;">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // App State - Using in-memory storage instead of localStorage
    let appState = {
      orders: [
        {
          id: "ORD-001",
          customerName: "Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯",
          customerPhone: "0501234567",
          animalType: "Ø¨Ù‚Ø±",
          quantity: 5,
          unitPrice: 1500,
          totalAmount: 7500,
          serviceType: "ØªÙˆØµÙŠÙ„",
          status: "ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„",
          date: "2025-11-27",
          notes: ""
        },
        {
          id: "ORD-002",
          customerName: "Ø£Ø­Ù…Ø¯ Ø³Ø§Ù„Ù…",
          customerPhone: "0502345678",
          animalType: "ØºÙ†Ù…",
          quantity: 10,
          unitPrice: 300,
          totalAmount: 3000,
          serviceType: "Ø§Ø³ØªÙ„Ø§Ù…",
          status: "Ù…Ø¹Ù„Ù‚",
          date: "2025-11-27",
          notes: ""
        }
      ],
      settings: {
        whatsappNumber: "",
        theme: "light"
      },
      lastUpdate: new Date().toISOString()
    };

    let charts = {};
    let orderIdCounter = 3;

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      initializeApp();
    });

    function initializeApp() {
      setupEventListeners();
      setTodayDate();
      updateStats();
      renderOrders();
      updateSettingsInfo();
      loadTheme();
    }

    function setupEventListeners() {
      // Navigation
      document.querySelectorAll('.nav-btn[data-view]').forEach(btn => {
        btn.addEventListener('click', () => switchView(btn.dataset.view));
      });

      // Theme toggle
      document.getElementById('themeToggle').addEventListener('click', toggleTheme);

      // Modal
      document.getElementById('newOrderBtn').addEventListener('click', openModal);
      document.getElementById('closeModal').addEventListener('click', closeModal);
      document.getElementById('cancelBtn').addEventListener('click', closeModal);
      document.getElementById('orderModal').addEventListener('click', (e) => {
        if (e.target.id === 'orderModal') closeModal();
      });

      // Form
      document.getElementById('orderForm').addEventListener('submit', handleFormSubmit);
      document.querySelector('[name="quantity"]').addEventListener('input', calculateTotal);
      document.querySelector('[name="unitPrice"]').addEventListener('input', calculateTotal);

      // Search and filter
      document.getElementById('searchInput').addEventListener('input', renderOrders);
      document.getElementById('filterStatus').addEventListener('change', renderOrders);

      // Actions
      document.getElementById('exportBtn').addEventListener('click', exportToCSV);
      document.getElementById('importBtn').addEventListener('click', () => document.getElementById('fileInput').click());
      document.getElementById('fileInput').addEventListener('change', handleImport);

      // Settings
      document.getElementById('backupBtn').addEventListener('click', createBackup);
      document.getElementById('restoreBtn').addEventListener('click', () => document.getElementById('fileInput').click());
      document.getElementById('downloadBtn').addEventListener('click', downloadData);
      document.getElementById('clearBtn').addEventListener('click', clearAllData);
      document.getElementById('saveWhatsappBtn').addEventListener('click', saveWhatsappNumber);
    }

    function switchView(viewName) {
      // Update nav buttons
      document.querySelectorAll('.nav-btn[data-view]').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.view === viewName);
      });

      // Update views
      document.querySelectorAll('.view').forEach(view => {
        view.classList.remove('active');
      });
      document.getElementById(`${viewName}-view`).classList.add('active');

      // Load reports if switching to reports
      if (viewName === 'reports') {
        setTimeout(loadReports, 100);
      }
    }

    function openModal() {
      document.getElementById('orderModal').classList.add('active');
      document.getElementById('orderForm').reset();
      setTodayDate();
    }

    function closeModal() {
      document.getElementById('orderModal').classList.remove('active');
    }

    function setTodayDate() {
      const today = new Date().toISOString().split('T')[0];
      document.querySelector('[name="date"]').value = today;
    }

    function calculateTotal() {
      const quantity = parseFloat(document.querySelector('[name="quantity"]').value) || 0;
      const unitPrice = parseFloat(document.querySelector('[name="unitPrice"]').value) || 0;
      const total = quantity * unitPrice;
      document.querySelector('[name="totalAmount"]').value = total.toFixed(2);
    }

    function handleFormSubmit(e) {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const order = {
        id: `ORD-${String(orderIdCounter++).padStart(3, '0')}`,
        customerName: formData.get('customerName'),
        customerPhone: formData.get('customerPhone'),
        animalType: formData.get('animalType'),
        quantity: parseInt(formData.get('quantity')),
        unitPrice: parseFloat(formData.get('unitPrice')),
        totalAmount: parseFloat(formData.get('totalAmount')),
        serviceType: formData.get('serviceType'),
        status: formData.get('status'),
        date: formData.get('date'),
        notes: formData.get('notes') || ''
      };

      appState.orders.unshift(order);
      appState.lastUpdate = new Date().toISOString();
      
      showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! âœ…', 'success');
      closeModal();
      updateStats();
      renderOrders();
      updateSettingsInfo();
    }

    function renderOrders() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const filterStatus = document.getElementById('filterStatus').value;
      
      let filteredOrders = appState.orders.filter(order => {
        const matchesSearch = 
          order.customerName.toLowerCase().includes(searchTerm) ||
          order.customerPhone.includes(searchTerm) ||
          order.id.toLowerCase().includes(searchTerm);
        
        const matchesFilter = !filterStatus || order.status === filterStatus;
        
        return matchesSearch && matchesFilter;
      });

      const tbody = document.getElementById('ordersTableBody');
      tbody.innerHTML = filteredOrders.map(order => `
        <tr>
          <td><strong>${order.id}</strong></td>
          <td>${order.customerName}</td>
          <td>${order.customerPhone}</td>
          <td>${order.animalType}</td>
          <td>${order.quantity}</td>
          <td>${order.totalAmount.toLocaleString()} Ø±.Ø³</td>
          <td><span class="status-badge status-${order.status.replace(/ /g, '-')}">${order.status}</span></td>
          <td>${order.date}</td>
          <td>
            <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;" onclick="deleteOrder('${order.id}')">ğŸ—‘ï¸</button>
          </td>
        </tr>
      `).join('');
    }

    function deleteOrder(orderId) {
      if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ')) {
        appState.orders = appState.orders.filter(o => o.id !== orderId);
        appState.lastUpdate = new Date().toISOString();
        showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        updateStats();
        renderOrders();
        updateSettingsInfo();
      }
    }

    function updateStats() {
      const orders = appState.orders;
      const totalOrders = orders.length;
      const totalRevenue = orders.reduce((sum, o) => sum + o.totalAmount, 0);
      const avgOrder = totalOrders > 0 ? totalRevenue / totalOrders : 0;
      const pendingOrders = orders.filter(o => o.status === 'Ù…Ø¹Ù„Ù‚').length;

      document.getElementById('totalOrders').textContent = totalOrders;
      document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString() + ' Ø±.Ø³';
      document.getElementById('avgOrder').textContent = avgOrder.toLocaleString(undefined, {maximumFractionDigits: 0}) + ' Ø±.Ø³';
      document.getElementById('pendingOrders').textContent = pendingOrders;
    }

    function loadReports() {
      loadStatusChart();
      loadAnimalChart();
      loadRevenueChart();
    }

    function loadStatusChart() {
      const statusCounts = {};
      appState.orders.forEach(order => {
        statusCounts[order.status] = (statusCounts[order.status] || 0) + 1;
      });

      const ctx = document.getElementById('statusChart');
      if (charts.statusChart) charts.statusChart.destroy();
      
      charts.statusChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: Object.keys(statusCounts),
          datasets: [{
            data: Object.values(statusCounts),
            backgroundColor: ['#FFC185', '#1FB8CD', '#047857', '#C0152F']
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: {
              position: 'bottom'
            }
          }
        }
      });
    }

    function loadAnimalChart() {
      const animalCounts = {};
      appState.orders.forEach(order => {
        animalCounts[order.animalType] = (animalCounts[order.animalType] || 0) + 1;
      });

      const ctx = document.getElementById('animalChart');
      if (charts.animalChart) charts.animalChart.destroy();
      
      charts.animalChart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: Object.keys(animalCounts),
          datasets: [{
            data: Object.values(animalCounts),
            backgroundColor: ['#1FB8CD', '#B4413C', '#5D878F', '#D2BA4C']
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: {
              position: 'bottom'
            }
          }
        }
      });
    }

    function loadRevenueChart() {
      const revenueByStatus = {};
      appState.orders.forEach(order => {
        revenueByStatus[order.status] = (revenueByStatus[order.status] || 0) + order.totalAmount;
      });

      const ctx = document.getElementById('revenueChart');
      if (charts.revenueChart) charts.revenueChart.destroy();
      
      charts.revenueChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: Object.keys(revenueByStatus),
          datasets: [{
            label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)',
            data: Object.values(revenueByStatus),
            backgroundColor: ['#FFC185', '#1FB8CD', '#047857', '#C0152F']
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          scales: {
            y: {
              beginAtZero: true
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });
    }

    function exportToCSV() {
      const headers = ['Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨', 'Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†', 'Ø§Ù„Ù‡Ø§ØªÙ', 'Ø§Ù„Ù…Ø§Ø´ÙŠØ©', 'Ø§Ù„ÙƒÙ…ÙŠØ©', 'Ø§Ù„Ø³Ø¹Ø±', 'Ø§Ù„Ù…Ø¨Ù„Øº', 'Ø§Ù„Ø®Ø¯Ù…Ø©', 'Ø§Ù„Ø­Ø§Ù„Ø©', 'Ø§Ù„ØªØ§Ø±ÙŠØ®', 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª'];
      const rows = appState.orders.map(o => [
        o.id, o.customerName, o.customerPhone, o.animalType, o.quantity,
        o.unitPrice, o.totalAmount, o.serviceType, o.status, o.date, o.notes
      ]);

      let csv = headers.join(',') + '\n';
      rows.forEach(row => {
        csv += row.map(cell => `"${cell}"`).join(',') + '\n';
      });

      const blob = new Blob(["\uFEFF" + csv], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `orders_${new Date().toISOString().split('T')[0]}.csv`;
      link.click();
      
      showAlert('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ“Š', 'success');
    }

    function handleImport(e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (event) => {
        try {
          const data = JSON.parse(event.target.result);
          if (data.orders && Array.isArray(data.orders)) {
            appState = data;
            updateStats();
            renderOrders();
            updateSettingsInfo();
            showAlert('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ“¥', 'success');
          } else {
            showAlert('Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­! âŒ', 'error');
          }
        } catch (error) {
          showAlert('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù! âŒ', 'error');
        }
      };
      reader.readAsText(file);
      e.target.value = '';
    }

    function createBackup() {
      const backup = JSON.stringify(appState, null, 2);
      const blob = new Blob([backup], { type: 'application/json' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `backup_${new Date().toISOString().split('T')[0]}.json`;
      link.click();
      showAlert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©! ğŸ’¾', 'success');
    }

    function downloadData() {
      createBackup();
    }

    function clearAllData() {
      if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!')) {
        appState.orders = [];
        appState.lastUpdate = new Date().toISOString();
        updateStats();
        renderOrders();
        updateSettingsInfo();
        showAlert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! ğŸ—‘ï¸', 'success');
      }
    }

    function saveWhatsappNumber() {
      const number = document.getElementById('whatsappNumber').value;
      appState.settings.whatsappNumber = number;
      showAlert('ØªÙ… Ø­ÙØ¸ Ø±Ù‚Ù… WhatsApp! âœ…', 'success');
    }

    function updateSettingsInfo() {
      document.getElementById('savedOrdersCount').textContent = appState.orders.length;
      const lastUpdate = new Date(appState.lastUpdate);
      document.getElementById('lastUpdate').textContent = lastUpdate.toLocaleDateString('ar-SA') + ' ' + lastUpdate.toLocaleTimeString('ar-SA');
      document.getElementById('whatsappNumber').value = appState.settings.whatsappNumber || '';
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-color-scheme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-color-scheme', newTheme);
      appState.settings.theme = newTheme;
      document.getElementById('themeToggle').textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    }

    function loadTheme() {
      const theme = appState.settings.theme || 'light';
      document.documentElement.setAttribute('data-color-scheme', theme);
      document.getElementById('themeToggle').textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    }

    function showAlert(message, type) {
      const alert = document.getElementById('alert');
      alert.textContent = message;
      alert.className = `alert alert-${type} show`;
      
      setTimeout(() => {
        alert.classList.remove('show');
      }, 3000);
    }

    // Make deleteOrder available globally
    window.deleteOrder = deleteOrder;
  </script>
</body>
</html>